{% extends 'base.html' %}
{% load static %}
<script>
    {% block jquery %}
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels:[
            {% for r in rain%}
            {% if forloop.last %}
            "{{ r.date}}"
            {% else %}
            "{{ r.date}}",
            {% endif %}
            {% endfor %}
        ],
        datasets: [{
            label: 'Rain(mm)',
            fill:false,
            data: [
                {% for r in rain %}
                {% if forloop.last %}
                "{{ r.amount }}"
                {% else %}
                "{{r.amount}}",
                {% endif %}
                {% endfor %}
            ],
            borderColor: '#233D4D',
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        title: {
                    display: true,
                    text: "Rainfall Time series Chart"
                },
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
    {% endblock %}
    </script>

{% block content %}
<div class="row">
<div class="col-8">
        <img src="https://i.ibb.co/YQ8SNJK/raindroplogo.png" alt="raindroplogo" id="logo" />
</div>
<div class="col-4"></div>
</div>
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
                <form method="POST" class="post-form" style="display: flex; justify-content: space-around;">
                        {% csrf_token %}
                        {% for field in form %}
                        {{field}}
                        {% endfor%}
                        <button type="submit" style="margin-left: 2em" id="btn">Submit</button>
                    </form>
        </div>
        <div class="col-md-2"></div>
    </div>
    <div class="row" style="margin-top: 3em;">
        <div class="col-2"></div>
        <div class="col-8"><canvas id="myChart" width="400" height="150"></canvas></div>
        <div class="col-2"></div>
    </div>
<h3>Filters</h3>
<form method="get">
    <div class="input-group input-daterange">
        <input type="date" name="startDate" class="form-control" value="{{ startDate }}">
            
        <input type="date" name="endDate" style="margin-left: 1em;" class="form-control" value="{{ endDate }}">
    </div>
    <br>
    <!-- <a href="https://ibb.co/M5jD3NK"><img src="https://i.ibb.co/YTK7qjJ/filter.png" alt="filter" border="0"></a> -->
    <button type="submit"   id="btn2"> Save</button>
    <a href="{{ request.path }}" class="btn btn-outline-danger">Reset Filters</a>
</form>
{% endblock content %}